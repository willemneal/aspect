<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@as-pect/cli | as-pect</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="../assets/js/search.js" data-base="..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="../index.html" class="title">as-pect</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="../globals.html">Globals</a>
				</li>
				<li>
					<a href="_as_pect_cli.html">@as-pect/cli</a>
				</li>
			</ul>
			<h1>Module @as-pect/cli</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<section class="tsd-panel tsd-comment">
				<div class="tsd-comment tsd-typography">
					<h1 id="-as-pect-cli">@as-pect/cli</h1>
					<p><a href="https://greenkeeper.io/"><img src="https://badges.greenkeeper.io/jtenner/as-pect.svg" alt="Greenkeeper badge"></a>
						<a href="https://travis-ci.org/jtenner/as-pect"><img src="https://travis-ci.org/jtenner/as-pect.svg?branch=master" alt="Build Status"></a>
					<a href="https://coveralls.io/github/jtenner/as-pect?branch=master"><img src="https://coveralls.io/repos/github/jtenner/as-pect/badge.svg?branch=master" alt="Coverage Status"></a></p>
					<p>Write your module in AssemblyScript and get blazing fast bootstrapped tests
					with WebAssembly speeds!</p>
					<h2 id="table-of-contents">Table of contents</h2>
					<ol>
						<li><a href="#philosophy">Philosophy</a></li>
						<li><a href="#usage">Usage</a></li>
						<li><a href="#cli">CLI</a></li>
						<li><a href="#configuration-file">Configuration File</a></li>
						<li><a href="#types-and-tooling">Types And Tooling</a></li>
						<li><a href="#ci-usage">CI Usage</a></li>
						<li><a href="#assemblyscript-compiler-options">AssemblyScript Compiler Options</a></li>
						<li><a href="#reporters">Reporters</a><ul>
								<li><a href="#summaryreporter">SummaryReporter</a></li>
								<li><a href="#verbosereporter">VerboseReporter</a></li>
								<li><a href="#jsonreporter">JSONReporter</a></li>
								<li><a href="#csvreporter">CSVReporter</a></li>
							</ul>
						</li>
						<li><a href="#portability">Portability</a></li>
						<li><a href="#rtrace-and-memory-leaks">RTrace and Memory Leaks</a></li>
						<li><a href="#performance-testing">Performance Testing</a></li>
						<li><a href="#custom-imports-using-cli">Custom Imports Using CLI</a></li>
						<li><a href="#using-as-pect-as-a-package">Using as-pect as a Package</a></li>
						<li><a href="#contributors">Contributors</a></li>
					</ol>
					<h2 id="philosophy">Philosophy</h2>
					<p>Testing is the first step of every project and you have a responsibility to
						make sure that the software you write works as intended. The <code>as-pect</code> project
						was created to help quickly scaffold and bootstrap AssemblyScript tests so
					that you can be confident in yourself and the software you write.</p>
					<p>One of the goals of this project is 100% portability to <code>jest</code> so that tests
					can be run in two different environments.</p>
					<h2 id="usage">Usage</h2>
					<p>To install <code>as-pect</code>, install the latest version from github. Once
					AssemblyScript becomes more stable, <code>as-pect</code> will be published to npm.</p>
					<pre><code>$ <span class="hljs-built_in">npm</span> install @as-pect/cli</code></pre><p>To initialize a test suite, run <code>npx asp --init</code>. It will create the following
					folders and files.</p>
					<pre><code>$ npx asp <span class="hljs-params">--init</span>

<span class="hljs-comment"># It will create the following folders if they don't exist</span>
C <span class="hljs-string">./assembly/</span>
C <span class="hljs-string">./assembly/__tests__/</span>

<span class="hljs-comment"># The as-pect types file will be created here if it doesn't exist</span>
C <span class="hljs-string">./assembly/__tests__/as-pect.d.ts</span>

<span class="hljs-comment"># An example test file will be created here if the __tests__ folder does not exist</span>
C <span class="hljs-string">./assembly/__tests__/example.spec.ts</span>

<span class="hljs-comment"># The default configuration file will be created here if it doesn't exist</span>
C <span class="hljs-string">./as-pect.config.js</span></code></pre><p>If you want <code>asp</code>&#39;s boilerplate located somewhere other than in <code>assembly/</code>,
						you can move it yourself, and update <code>as-pect.config.js</code> to point to the new
					location accordingly.</p>
					<p>To run <code>as-pect</code>, use the command line: <code>npx asp</code>, or create an npm script.</p>
					<pre><code class="language-json">{
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"asp"</span>
  }
}</code></pre>
					<p>The command line defaults to using <code>./aspect.config.js</code>, otherwise you can
					specify all the configuration options using the command line interface.</p>
					<p>To change the location of the as-pect configuration, use the <code>--config</code> option.</p>
					<pre><code>$ npx asp --config as-pect<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span></code></pre><p>Most of the values configured in the configuration are overridable via the command
					line, with the exception of the Web Assembly imports provided to the module.</p>
					<p>To access the help screen, use the <code>--help</code> flag, which prints the following:</p>
					<!-- markdownlint-disable MD013 MD031 -->
					<!--
  This is the command line help screen, and has lines longer than 80
  characters. This cannot be helped.
-->
					<pre><code>SYNTAX
  asp --init                             Create a test config, an assembly/__tests__ folder <span class="hljs-keyword">and</span> exit.
    asp -i
    asp <span class="hljs-attribute">--config</span>=as-pect.config.js       Use a specified configuration
    asp -c as-pect.config.js
    asp --version                        View the version.
    asp -v
    asp --help                           Show this help screen.
    asp -h
    asp --types                          Copy the types file <span class="hljs-keyword">to</span> assembly/__tests__/as-pect.d.ts
    asp -t
    asp --compiler                       Path <span class="hljs-keyword">to</span> folder relative <span class="hljs-keyword">to</span> project root which contains
                                         folder/dist/asc <span class="hljs-keyword">for</span> the compiler <span class="hljs-keyword">and</span> folder/lib/loader <span class="hljs-keyword">for</span> loader. (Default: assemblyscript)

  TEST OPTIONS
    --file=[regex]                       <span class="hljs-builtin-name">Run</span> the tests of each file that matches this regex. (Default: /./)
      --files=[regex]
      -f=[regex]

    --group=[regex]                      <span class="hljs-builtin-name">Run</span> each describe block that matches this regex (Default: /(:?)/)
      --groups=[regex]
      -g=[regex]

    --test=[regex]                       <span class="hljs-builtin-name">Run</span> each test that matches this regex (Default: /(:?)/)
      --tests=[regex]
      -t=[regex]

    --output-binary                      Create a (.wasm) file can contains all the tests <span class="hljs-keyword">to</span> be <span class="hljs-builtin-name">run</span> later.
      -o

    --norun                              Skip running tests <span class="hljs-keyword">and</span> output the compiler files.
      -n

    --nortrace                           Skip rtrace reference counting calculations.
      -nr

    asp --workers 3                      <span class="hljs-builtin-name">Enable</span> the experimental worker worklets (default: 0  [disabled])
      asp -w

  REPORTER OPTIONS
    --summary                            Use the summary reporter. Use the summary reporter. (This is the<span class="hljs-built_in"> default </span><span class="hljs-keyword">if</span> <span class="hljs-literal">no</span> reporter is specified.)
    --verbose                            Use the reporter.
    --csv                                Use the csv reporter (output results <span class="hljs-keyword">to</span> csv files.)
    --json                               Use the json reporter (output results <span class="hljs-keyword">to</span> json files.)
    --reporter                           Define a custom reporter (path <span class="hljs-keyword">or</span> module)

  PERFORMANCE OPTIONS
    --performance                        <span class="hljs-builtin-name">Enable</span> performance statistics <span class="hljs-keyword">for</span> {bold every} test. (Default: <span class="hljs-literal">false</span>)
    --max-samples=[number]               <span class="hljs-builtin-name">Set</span> the maximum number of samples <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">run</span> <span class="hljs-keyword">for</span> each test. (Default: 10000 samples)
    --max-test-run-time=[number]         <span class="hljs-builtin-name">Set</span> the maximum test <span class="hljs-builtin-name">run</span> time <span class="hljs-keyword">in</span> milliseconds. (Default: 2000ms)
    --round-decimal-places=[number]      <span class="hljs-builtin-name">Set</span> the number of decimal places <span class="hljs-keyword">to</span> round <span class="hljs-keyword">to</span>. (Default: 3)
    --report-median(=<span class="hljs-literal">false</span>)?             Enable/<span class="hljs-builtin-name">Disable</span> reporting of the median time. (Default: <span class="hljs-literal">true</span>)
    --report-average(=<span class="hljs-literal">false</span>)?            Enable/<span class="hljs-builtin-name">Disable</span> reporting of the average time. (Default: <span class="hljs-literal">true</span>)
    --report-standard-deviation(=<span class="hljs-literal">false</span>)? Enable/<span class="hljs-builtin-name">Disable</span> reporting of the standard deviation. (Default: <span class="hljs-literal">false</span>)
    --report-max(=<span class="hljs-literal">false</span>)?                Enable/<span class="hljs-builtin-name">Disable</span> reporting of the largest <span class="hljs-builtin-name">run</span> time. (Default: <span class="hljs-literal">false</span>)
    --report-min(=<span class="hljs-literal">false</span>)?                Enable/<span class="hljs-builtin-name">Disable</span> reporting of the smallest <span class="hljs-builtin-name">run</span> time. (Default: <span class="hljs-literal">false</span>)
    --report-variance(=<span class="hljs-literal">false</span>)?           Enable/<span class="hljs-builtin-name">Disable</span> reporting of the variance. (Default: <span class="hljs-literal">false</span>)</code></pre><!-- markdownlint-enable MD013 MD031 -->
					<h2 id="configuration-file">Configuration File</h2>
					<p>Currently <code>as-pect</code> will compile each file that matches the
						<a href="https://en.wikipedia.org/wiki/Glob_%28programming%29"><code>glob</code></a>s in the
						<code>include</code> property of your configuration. The default include is
						<code>&quot;assembly/__tests__/**/*.spec.ts&quot;</code>. It must compile each file, and run each
						binary separately inside it&#39;s own <code>TestContext</code>. This is a limitation of
					AssemblyScript, not of <code>as-pect</code>.</p>
					<p>A typical configuration is provided when you use <code>asp --init</code> and is located
					<a href="blob/master/init/as-pect.config.js">here</a>.</p>
					<h2 id="types-and-tooling">Types And Tooling</h2>
					<p>The <code>as-pect</code> cli comes with a way to generate the types for all the globals
						used by the framework. Simply use the <code>--init</code> or <code>--types</code> flag. When a new
						version of <code>as-pect</code> is released, simply run the <code>npx asp --types</code> command to
						get the latest version of these function definitions. This will greatly
						increase your productivity because it comes with lots of documentation, and
					adds a lot of intellisense to your development experience.</p>
					<p>It is also possible to reference the types manually. Use the following
						reference at the top of your <code>assembly/index.ts</code> file to include these types
						in your project automatically. If you use this method for your types, feel
					free to delete the auto-generated types file in your test folder.</p>
					<pre><code class="language-ts"><span class="hljs-comment">/// &lt;reference path="../node_modules/@as-pect/core/types/as-pect.d.ts" /&gt;</span>
<span class="hljs-comment">/// &lt;reference path="../node_modules/@as-pect/core/types/as-pect.portable.d.ts" /&gt;</span></code></pre>
					<h2 id="ci-usage">CI Usage</h2>
					<p>If any module fails during compilation, the utility will exit immediately with
					code 1 so it can be used for quicker ci builds.</p>
					<p>Adding this line to your <code>.travis.yml</code> will allow you to specify a custom
					script to your CI build.</p>
					<pre><code class="language-yaml"><span class="hljs-attr">script:</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-attr">test:ci</span></code></pre>
					<p>Then in your package.json file, you can instruct the <code>&quot;test:ci&quot;</code> script to
					run the <code>asp</code> command line tool to use the <code>SummaryTestReporter</code> like this:</p>
					<pre><code class="language-json">{
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"test:ci"</span>: <span class="hljs-string">"asp --summary"</span>
  }
}</code></pre>
					<h2 id="assemblyscript-compiler-options">AssemblyScript Compiler Options</h2>
					<h3 id="-compiler-cli-argument"><code>--compiler</code> CLI Argument</h3>
					<p>By default <code>as-pect</code> will use node&#39;s resolver to look for an AssemblyScript
						module. If you want to specify a different version of the compiler, use
						<code>--compiler ../relative/path/to/compiler/folder</code>. Note that it expects the following
						to be the same <code>__folder__/dist/asc.js</code>, <code>__folder__/cli/util/options.js</code>, and
					<code>__folder__/lib/loader.js</code>.</p>
					<h3 id="compiler-flags">Compiler Flags</h3>
					<p>Regardless of the installed version, all the compiler flags will be passed to
					the <code>asc</code> command line tool.</p>
					<pre><code class="language-ts"><span class="hljs-keyword">const</span> compiler = <span class="hljs-built_in">require</span>(path.join(path.cwd(), options.compiler, <span class="hljs-string">"cli/asc"</span>));</code></pre>
					<p>Inside the callback, any files that are generated, except for the <code>.wasm</code> file
						will be output using the <code>{testFolder}/{testName}.{ext}</code> format. This includes
					source maps, <code>.wat</code> files, <code>.js</code> files, and types files generated by the compiler.</p>
					<h2 id="reporters">Reporters</h2>
					<p>Reporters are the way tests get reported. When running the CLI, the
						<code>SummaryReporter</code> is used and all the values will be logged to the console. The
						test suite itself does not log out test results. If you want to use a custom
					reporter, you can create your own by extending the abstract <code>Reporter</code> class.</p>
					<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> Reporter {
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onStart(suite: TestSuite): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onGroupStart(group: TestGroup): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onGroupFinish(group: TestGroup): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onTestStart(group: TestGroup, result: TestResult): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onTestFinish(group: TestGroup, result: TestResult): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onFinish(suite: TestSuite): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onTodo(group: TestGroup, todo: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span>;
}</code></pre>
					<p>Each test suite run will use the provided reporter and call
						<code>onStart(suite: TestSuite)</code> to notify a consumer that a test has started. This
						happens once per test file. Since a file can have multiple <code>describe</code> function
						calls, these are logically placed into <code>TestGroup</code>s. Each <code>TestGroup</code> has it&#39;s
					own description and contains a list of <code>TestResult</code>s that were run.</p>
					<p>If no reporter is provided to the configuration, one will be provided that uses
					<code>stdout</code> and <code>chalk</code> to provide colored output.</p>
					<p>If performance is enabled, then the <code>times</code> array will be populated with the
					runtime values measured in milliseconds.</p>
					<h3 id="summaryreporter">SummaryReporter</h3>
					<p>This reporter only outputs failed tests and is the default <code>TestReporter</code> used
					by the <code>as-pect</code> cli. It can be used directly from the configuration file.</p>
					<pre><code class="language-ts"><span class="hljs-keyword">const</span> { SummaryReporter } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@as-pect/core"</span>);

<span class="hljs-comment">// export your configuration</span>
<span class="hljs-built_in">module</span>.exports = {
  reporter: <span class="hljs-keyword">new</span> SummaryReporter({
    <span class="hljs-comment">// enableLogging: false, // disable logging</span>
  }),
};</code></pre>
					<p>It can also be used from the cli using the <code>--summary</code> flag.</p>
					<pre><code>npx asp <span class="hljs-comment">--summary</span>
npx asp <span class="hljs-comment">--summary=enableLogging=false</span></code></pre><p>Note: When using parameters for the builtin reporters, the <code>=</code> is required to
					parse the querystring parameters correctly.</p>
					<h3 id="verbosereporter">VerboseReporter</h3>
					<p>This reporter outputs a lot of information, including:</p>
					<ul>
						<li>All Test Groups and Test Names for each test</li>
						<li>RTrace Info (reference allocations vs deallocations)</li>
						<li>Performance Statistics</li>
						<li>Logging Information</li>
					</ul>
					<p>It can be used directly from the configuration file.</p>
					<pre><code class="language-ts"><span class="hljs-keyword">const</span> { VerboseReporter } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@as-pect/core"</span>);

<span class="hljs-built_in">module</span>.exports = {
  reporter: <span class="hljs-keyword">new</span> VerboseReporter(),
};</code></pre>
					<p>It can also be used from the cli using the <code>--verbose</code> flag.</p>
					<pre><code>npx asp <span class="hljs-comment">--verbose</span></code></pre><h3 id="jsonreporter">JSONReporter</h3>
					<p>The <code>JSONReporter</code> can be used to create <code>json</code> files that contain the test
						output. The file output location is <code>{testname}.spec.json</code>. It can be used
					directly from the configuration file.</p>
					<pre><code class="language-ts"><span class="hljs-comment">// as-pect.config.js</span>
<span class="hljs-keyword">const</span> { JSONReporter } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@as-pect/core"</span>);

<span class="hljs-comment">// export your configuration</span>
<span class="hljs-built_in">module</span>.exports = {
  reporter: <span class="hljs-keyword">new</span> JSONReporter(),
};</code></pre>
					<p>It can also be used from the cli using the <code>--json</code> flag.</p>
					<pre><code>npx asp <span class="hljs-comment">--json</span></code></pre><p>The object ouput definition is shaped like this:</p>
					<pre><code class="language-ts"><span class="hljs-comment">// Test Results are compiled into an array</span>
[
  <span class="hljs-comment">// For each test, there is an object with the following shape</span>
  {
    <span class="hljs-comment">// The Test Group</span>
    group: group.name,
    <span class="hljs-comment">// The Test Name</span>
    name: result.name,
    <span class="hljs-comment">// If it ran</span>
    ran: result.ran,
    <span class="hljs-comment">// If it passed</span>
    pass: result.pass,
    <span class="hljs-comment">// The total test runtim</span>
    runtime: result.runTime,
    <span class="hljs-comment">// The error message</span>
    message: result.message,
    <span class="hljs-comment">// Actual value message if an expectation failed</span>
    actual: result.actual ? result.actual.message : <span class="hljs-literal">null</span>,
    <span class="hljs-comment">// Expected value message if an expectation failed</span>
    expected: result.expected ? result.expected.message : <span class="hljs-literal">null</span>,
    <span class="hljs-comment">// The average run time (performance)</span>
    average: result.average,
    <span class="hljs-comment">// The median run time (performance)</span>
    median: result.median,
    <span class="hljs-comment">// The maximum run time (performance)</span>
    max: result.max,
    <span class="hljs-comment">// The minimum run time (performance)</span>
    min: result.min,
    <span class="hljs-comment">// The standard deviation of the run times (performance)</span>
    stdDev: result.stdDev,
    <span class="hljs-comment">// The variance of the run times (performance)</span>
    variance: result.variance,
  },
];</code></pre>
					<h3 id="csvreporter">CSVReporter</h3>
					<p>The <code>CSVReporter</code> can be used to create <code>csv</code> files that contain the test
						output. The file output location is <code>{testname}.spec.csv</code>. It can be used
					directly from the configuration file.</p>
					<pre><code class="language-ts"><span class="hljs-keyword">const</span> { CSVReporter } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@as-pect/core"</span>);

<span class="hljs-comment">// export your configuration</span>
<span class="hljs-built_in">module</span>.exports = {
  reporter: <span class="hljs-keyword">new</span> CSVReporter(),
};</code></pre>
					<p>It can also be used from the cli using the <code>--csv</code> flag.</p>
					<pre><code>npx asp <span class="hljs-comment">--csv</span></code></pre><p>This is a list of all the columns in the exported csv file.</p>
					<pre><code class="language-ts"><span class="hljs-keyword">const</span> csvColumns = [
  <span class="hljs-string">"Group"</span>, <span class="hljs-comment">// The Test Group</span>
  <span class="hljs-string">"Name"</span>, <span class="hljs-comment">// The Test Name</span>
  <span class="hljs-string">"Ran"</span>, <span class="hljs-comment">// If it ran</span>
  <span class="hljs-string">"Pass"</span>, <span class="hljs-comment">// If it passed</span>
  <span class="hljs-string">"Runtime"</span>, <span class="hljs-comment">// The total test runtim</span>
  <span class="hljs-string">"Message"</span>, <span class="hljs-comment">// The error message</span>
  <span class="hljs-string">"Actual"</span>, <span class="hljs-comment">// Actual value message if an expectation failed</span>
  <span class="hljs-string">"Expected"</span>, <span class="hljs-comment">// Expected value message if an expectation failed</span>
  <span class="hljs-string">"Average"</span>, <span class="hljs-comment">// The average run time (performance)</span>
  <span class="hljs-string">"Median"</span>, <span class="hljs-comment">// The median run time (performance)</span>
  <span class="hljs-string">"Max"</span>, <span class="hljs-comment">// The maximum run time (performance)</span>
  <span class="hljs-string">"Min"</span>, <span class="hljs-comment">// The minimum run time (performance)</span>
  <span class="hljs-string">"StdDev"</span>, <span class="hljs-comment">// The standard deviation of the run times (performance)</span>
  <span class="hljs-string">"Variance"</span>, <span class="hljs-comment">// The variance of the run times (performance)</span>
];</code></pre>
					<h2 id="portability">Portability</h2>
					<p>It is possible to write <code>as-pect</code> tests that run in <code>jest</code> as well. The
						compatible functions are documented in the
						<code>@as-pect/core/types/as-pect.portable.d.ts</code> file and can be added to your
						project by using the <code>--portable</code> flag. Instead of using the types provided by
						<code>@types/jest</code>, use the portable ones provided by <code>as-pect</code>. This is the
					recommended way to setup testing when trying to write portable tests.</p>
					<pre><code><span class="hljs-selector-tag">npm</span> <span class="hljs-selector-tag">install</span> <span class="hljs-selector-tag">--save-dev</span> <span class="hljs-selector-tag">jest</span> @<span class="hljs-keyword">as</span>-<span class="hljs-keyword">pect</span>/<span class="hljs-keyword">cli</span> typescript assemblyscript/assemblyscript
npx ts-jest config:init
npx asp --portable</code></pre><p>Then change the jest configuration to match these properties as you see fit:</p>
					<pre><code class="language-js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">preset</span>: <span class="hljs-string">"ts-jest"</span>,
  <span class="hljs-attr">testEnvironment</span>: <span class="hljs-string">"node"</span>,
  <span class="hljs-attr">testMatch</span>: [<span class="hljs-string">"assembly/__tests__/**/*.spec.ts"</span>],
};</code></pre>
					<p>This is the compatibility table.</p>
					<h2 id="rtrace-and-memory-leaks">RTrace and Memory Leaks</h2>
					<p>If an expectation fails and hits an <code>unreachable()</code> instruction, any unreleased
						references in the function call stack will be held indefinitely as a memory
						leak. Test Suites don&#39;t stop running if they fail the test callback. However,
						tests will stop if they fail inside the <code>beforeEach()</code>, <code>beforeAll()</code>,
					<code>afterEach()</code>, and <code>afterAll()</code> callbacks.</p>
					<p>Typically, a <code>throws()</code> test will leave at <em>least</em> a single <code>Expectation</code> on the
						heap. This is to be expected, because the <code>unreachable()</code> instruction unwinds
						the stack, and prevents the ability for each function to <code>__release</code> a reference
					pointer properly. Your test suite output may look like this:</p>
					<pre><code>[<span class="hljs-keyword">Describe</span>]: toHaveLength TypedArray <span class="hljs-keyword">type</span>: Uint32Array

 [<span class="hljs-keyword">Success</span>]: ✔ should assert expected <span class="hljs-keyword">length</span>
  [Throws]: ✔ <span class="hljs-keyword">when</span> expected <span class="hljs-keyword">length</span> should <span class="hljs-keyword">not</span> equal the same <span class="hljs-keyword">value</span> RTrace: +<span class="hljs-number">3</span>
 [<span class="hljs-keyword">Success</span>]: ✔ should <span class="hljs-keyword">verify</span> the <span class="hljs-keyword">length</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> another <span class="hljs-keyword">value</span>
  [Throws]: ✔ <span class="hljs-keyword">when</span> the <span class="hljs-keyword">length</span> <span class="hljs-keyword">is</span> another expected <span class="hljs-keyword">value</span> RTrace: +<span class="hljs-number">3</span></code></pre><p>The <code>RTrace: +3</code> corresponds to an <code>Expectation</code>, a <code>Uint32Array</code>, and a single
						backing <code>ArrayBuffer</code> that was left on the heap because of the fact that the
						expectation failed. This was expected because these two tests were annotated
						with the <code>throws(desc, callback)</code> function. If you see a function that is
						expected to <code>pass</code> and <code>RTrace</code> returns a very large value, it might be an
						indicator of a very serious memory leak, and the <code>DefaultTestReporter</code> can be
					your best friend when it comes to finding these sorts of problems.</p>
					<p>Among other solutions, the following methods are exposed to you as a way to
						inspect how many allocations and frees occurred during the course of function
						execution. Every one of these functions exist in the <code>RTrace</code> namespace and will
						call into JavaScript to query the state of the heap relative to the overall test
					file, the test group, and each individual test depending on the function.</p>
					<p>This can be disabled with the <code>--nortrace</code> cli option.</p>
					<h2 id="performance-testing">Performance Testing</h2>
					<p>To increase performance on testing, do not use the <code>log()</code> function and reduce
						the amount of IO that <code>as-pect</code> must do to compile your tests. The biggest
						bottleneck in Web Assembly testing, is compilation. This means that using
						things like <code>@inline</code> many times will cause your module to compile more slowly,
					and as a result the testing file will run slower.</p>
					<p>Providing these values inside an <code>as-pect.config.js</code> configuration will set
					these as <em>the</em> global defaults.</p>
					<p>Note that when using the <code>cli</code>, the cli flag inputs will override the
					<code>as-pect.config.js</code> configured values.</p>
					<pre><code class="language-js"><span class="hljs-comment">// in as-pect.config.js</span>
<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">performance</span>: {
    <span class="hljs-comment">/** Enable performance statistics gathering for *every* test. */</span>
    enabled: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">/** Set the maximum number of samples to run for every test. */</span>
    maxSamples: <span class="hljs-number">10000</span>,
    <span class="hljs-comment">/** Set the maximum test run time in milliseconds for every test. */</span>
    maxTestRunTime: <span class="hljs-number">2000</span>,
    <span class="hljs-comment">/** Report the median time in the default reporter for every test. */</span>
    reportMedian: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">/** Report the average time in milliseconds for every test. */</span>
    reportAverage: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">/** Report the standard deviation for every test. */</span>
    reportStandardDeviation: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">/** Report the maximum run time in milliseconds for every test. */</span>
    reportMax: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">/** Report the minimum run time in milliseconds for every test. */</span>
    reportMin: <span class="hljs-literal">false</span>,
  },
};</code></pre>
					<h2 id="custom-imports-using-cli">Custom Imports Using CLI</h2>
					<p>If a set of custom imports are required for your test module, it&#39;s possible to
					provide a set of imports for a given test file.</p>
					<p>If your test is located at <code>assembly/__tests__/customImports.spec.ts</code>, then use
						filename <code>assembly/__tests__/customImports.spec.imports.js</code> to export the test
						module&#39;s imports. This file will be required by the cli before the module is
					instantiated.</p>
					<p><em><strong>IMPORTANT</strong>: THIS WILL IGNORE <code>as-pect.config.js</code>&#39;S IMPORTS COMPLETELY</em></p>
					<p>Please see the provided example located in <code>assembly/__tests__/customImports.spec.ts</code>.</p>
					<h2 id="contributors">Contributors</h2>
					<p>To contribute please see <a href="./CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
					<p>Thanks to <a href="github.com/willemneal">@willemneal</a> and
						<a href="github.com/maxgraey">@MaxGraey</a> for all their support in making <code>as-pect</code> the
					best software it can be.</p>
					<p>Other Contributors:</p>
					<ul>
						<li><a href="github.com/trusktr">@trusktr</a> - Documentation Changes</li>
						<li><a href="github.com/maxgraey">@MaxGraey</a> - Performance API suggestions</li>
						<li><a href="github.com/torch2424">@torch2424</a> - Documentation Changes</li>
						<li><a href="github.com/torch2424">@dcodeio</a> - Made AssemblyScript itself!</li>
					</ul>
					<h2 id="special-thanks">Special Thanks</h2>
					<p>Special thanks to the <a href="github.com/AssemblyScript/assemblyscript">AssemblyScript</a>
					team for creating AssemblyScript itself.</p>
				</div>
			</section>
			<section class="tsd-panel-group tsd-index-group">
				<h2>Index</h2>
				<section class="tsd-panel tsd-index-panel">
					<div class="tsd-index-content">
						<section class="tsd-index-section ">
							<h3>Interfaces</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-interface tsd-parent-kind-module"><a href="../interfaces/_as_pect_cli.icompilerflags.html" class="tsd-kind-icon">ICompiler<wbr>Flags</a></li>
								<li class="tsd-kind-interface tsd-parent-kind-module"><a href="../interfaces/_as_pect_cli.iconfiguration.html" class="tsd-kind-icon">IConfiguration</a></li>
								<li class="tsd-kind-interface tsd-parent-kind-module"><a href="../interfaces/_as_pect_cli.options.html" class="tsd-kind-icon">Options</a></li>
							</ul>
						</section>
						<section class="tsd-index-section ">
							<h3>Variables</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_as_pect_cli.html#defaultcliargs" class="tsd-kind-icon">default<wbr>Cli<wbr>Args</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_as_pect_cli.html#version" class="tsd-kind-icon">version</a></li>
							</ul>
						</section>
						<section class="tsd-index-section ">
							<h3>Functions</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="_as_pect_cli.html#asp" class="tsd-kind-icon">asp</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="_as_pect_cli.html#parse" class="tsd-kind-icon">parse</a></li>
							</ul>
						</section>
					</div>
				</section>
			</section>
			<section class="tsd-panel-group tsd-member-group ">
				<h2>Variables</h2>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="defaultcliargs" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> default<wbr>Cli<wbr>Args</h3>
					<div class="tsd-signature tsd-kind-icon">default<wbr>Cli<wbr>Args<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Map</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">CommandLineArg</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol"> =&nbsp;makeArgMap(_Args)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/jtenner/as-pect/blob/e7b97d4/packages/cli/src/util/CommandLineArg.ts#L378">cli/src/util/CommandLineArg.ts:378</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>This is the set of stored command line arguments for the asp command line.</p>
						</div>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="version" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> version</h3>
					<div class="tsd-signature tsd-kind-icon">version<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol"> =&nbsp;pkg.version</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/jtenner/as-pect/blob/e7b97d4/packages/cli/src/index.ts#L13">cli/src/index.ts:13</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>This is the command line package version.</p>
						</div>
					</div>
				</section>
			</section>
			<section class="tsd-panel-group tsd-member-group ">
				<h2>Functions</h2>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="asp" class="tsd-anchor"></a>
					<h3>asp</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">asp<span class="tsd-signature-symbol">(</span>args<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/jtenner/as-pect/blob/e7b97d4/packages/cli/src/index.ts#L22">cli/src/index.ts:22</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>This is the cli entry point and expects an array of arguments from the command line.</p>
								</div>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>args: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The arguments from the command line</p>
									</div>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="parse" class="tsd-anchor"></a>
					<h3>parse</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">parse<span class="tsd-signature-symbol">(</span>commands<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span>, cliArgs<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">ArgMap</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../interfaces/_as_pect_cli.options.html" class="tsd-signature-type">Options</a></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/jtenner/as-pect/blob/e7b97d4/packages/cli/src/util/CommandLineArg.ts#L396">cli/src/util/CommandLineArg.ts:396</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>This method parses command line options like the <code>asp</code> command does. It takes an optional
									second parameter to modify the command line arguments used.</p>
								</div>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>commands: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The command line arguments.</p>
									</div>
								</li>
								<li>
									<h5><span class="tsd-flag ts-flagDefault value">Default value</span> cliArgs: <span class="tsd-signature-type">ArgMap</span><span class="tsd-signature-symbol"> =&nbsp;defaultCliArgs</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The set of parsable arguments.</p>
									</div>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <a href="../interfaces/_as_pect_cli.options.html" class="tsd-signature-type">Options</a></h4>
						</li>
					</ul>
				</section>
			</section>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="../globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="_as_pect_assembly.html">@as-<wbr>pect/assembly</a>
					</li>
					<li class="current tsd-kind-module">
						<a href="_as_pect_cli.html">@as-<wbr>pect/cli</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="_as_pect_core.html">@as-<wbr>pect/core</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-interface tsd-parent-kind-module">
						<a href="../interfaces/_as_pect_cli.icompilerflags.html" class="tsd-kind-icon">ICompiler<wbr>Flags</a>
					</li>
					<li class=" tsd-kind-interface tsd-parent-kind-module">
						<a href="../interfaces/_as_pect_cli.iconfiguration.html" class="tsd-kind-icon">IConfiguration</a>
					</li>
					<li class=" tsd-kind-interface tsd-parent-kind-module">
						<a href="../interfaces/_as_pect_cli.options.html" class="tsd-kind-icon">Options</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_as_pect_cli.html#defaultcliargs" class="tsd-kind-icon">default<wbr>Cli<wbr>Args</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_as_pect_cli.html#version" class="tsd-kind-icon">version</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="_as_pect_cli.html#asp" class="tsd-kind-icon">asp</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="_as_pect_cli.html#parse" class="tsd-kind-icon">parse</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="../assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="../assets/js/search.js"><' + '/script>');</script>
</body>
</html>